<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Examples · Cxx.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Cxx.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../api/">API</a></li><li class="is-active"><a class="tocitem" href>Examples</a><ul class="internal"><li><a class="tocitem" href="#Embedding-a-simple-C-function-in-Julia-1"><span>Embedding a simple C++ function in Julia</span></a></li><li><a class="tocitem" href="#Passing-numeric-arguments-from-Julia-to-C-1"><span>Passing numeric arguments from Julia to C++</span></a></li><li><a class="tocitem" href="#Passing-strings-from-Julia-to-C-1"><span>Passing strings from Julia to C++</span></a></li><li><a class="tocitem" href="#Passing-a-Julia-expression-to-C-1"><span>Passing a Julia expression to C++</span></a></li><li><a class="tocitem" href="#Embedding-C-code-inside-a-Julia-function-1"><span>Embedding C++ code inside a Julia function</span></a></li><li><a class="tocitem" href="#Using-C-enums-1"><span>Using C++ enums</span></a></li><li><a class="tocitem" href="#C-classes-1"><span>C++ classes</span></a></li><li><a class="tocitem" href="#Using-C-with-shared-libraries-1"><span>Using C++ with shared libraries</span></a></li></ul></li><li><a class="tocitem" href="../implementation/">Implementation</a></li><li><a class="tocitem" href="../repl/">C++ REPL</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Examples</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Examples</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaInterop/Cxx.jl/blob/master/docs/src/examples.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Examples-1"><a class="docs-heading-anchor" href="#Examples-1">Examples</a><a class="docs-heading-anchor-permalink" href="#Examples-1" title="Permalink"></a></h1><h2 id="Embedding-a-simple-C-function-in-Julia-1"><a class="docs-heading-anchor" href="#Embedding-a-simple-C-function-in-Julia-1">Embedding a simple C++ function in Julia</a><a class="docs-heading-anchor-permalink" href="#Embedding-a-simple-C-function-in-Julia-1" title="Permalink"></a></h2><pre><code class="language-julia-repl">julia&gt; cxx&quot;#include &lt;iostream&gt;&quot;
true

julia&gt; cxx&quot;&quot;&quot;
           void mycppfunction() {
               int z = 0;
               int y = 5;
               int x = 10;
               z = x * y + 2;
               std::cout &lt;&lt; &quot;The number is &quot; &lt;&lt; z &lt;&lt; std::endl;
           }
       &quot;&quot;&quot;
true

julia&gt; julia_function() = @cxx mycppfunction()
julia_function (generic function with 1 method)

julia&gt; julia_function()
The number is 52</code></pre><h2 id="Passing-numeric-arguments-from-Julia-to-C-1"><a class="docs-heading-anchor" href="#Passing-numeric-arguments-from-Julia-to-C-1">Passing numeric arguments from Julia to C++</a><a class="docs-heading-anchor-permalink" href="#Passing-numeric-arguments-from-Julia-to-C-1" title="Permalink"></a></h2><pre><code class="language-julia-repl">julia&gt; jnum = 10
10

julia&gt; cxx&quot;&quot;&quot;
           void printme(int x) {
               std::cout &lt;&lt; x &lt;&lt; std::endl;
           }
       &quot;&quot;&quot;
true

julia&gt; @cxx printme(jnum)
10</code></pre><h2 id="Passing-strings-from-Julia-to-C-1"><a class="docs-heading-anchor" href="#Passing-strings-from-Julia-to-C-1">Passing strings from Julia to C++</a><a class="docs-heading-anchor-permalink" href="#Passing-strings-from-Julia-to-C-1" title="Permalink"></a></h2><pre><code class="language-julia-repl">julia&gt; cxx&quot;&quot;&quot;
           void printme(const char *name) {
               // const char* =&gt; std::string
               std::string sname = name;
               // print it out
               std::cout &lt;&lt; sname &lt;&lt; std::endl;
           }
       &quot;&quot;&quot;
true

julia&gt; @cxx printme(pointer(&quot;John&quot;))
John</code></pre><h2 id="Passing-a-Julia-expression-to-C-1"><a class="docs-heading-anchor" href="#Passing-a-Julia-expression-to-C-1">Passing a Julia expression to C++</a><a class="docs-heading-anchor-permalink" href="#Passing-a-Julia-expression-to-C-1" title="Permalink"></a></h2><pre><code class="language-julia-repl">julia&gt; cxx&quot;&quot;&quot;
           void test_print() {
               $:(println(&quot;\nTo end this test, press any key&quot;)::Cvoid);
           }
       &quot;&quot;&quot;
true

julia&gt; @cxx test_print()

To end this test, press any key</code></pre><h2 id="Embedding-C-code-inside-a-Julia-function-1"><a class="docs-heading-anchor" href="#Embedding-C-code-inside-a-Julia-function-1">Embedding C++ code inside a Julia function</a><a class="docs-heading-anchor-permalink" href="#Embedding-C-code-inside-a-Julia-function-1" title="Permalink"></a></h2><pre><code class="language-julia-repl">julia&gt; function playing()
           for i = 1:5
               icxx&quot;&quot;&quot;
                   int tellme;
                   std::cout &lt;&lt; &quot;Please enter a number: &quot; &lt;&lt; std::endl;
                   std::cin &gt;&gt; tellme;
                   std::cout &lt;&lt; &quot;\nYour number is &quot; &lt;&lt; tellme &lt;&lt; &quot;\n&quot; &lt;&lt; std::endl;
               &quot;&quot;&quot;
           end
       end
playing (generic function with 1 method)

julia&gt; playing()
Please enter a number:
45

Your number is 45</code></pre><h2 id="Using-C-enums-1"><a class="docs-heading-anchor" href="#Using-C-enums-1">Using C++ enums</a><a class="docs-heading-anchor-permalink" href="#Using-C-enums-1" title="Permalink"></a></h2><pre><code class="language-julia-repl">julia&gt; cxx&quot;&quot;&quot;
           class Klassy {
               public:
                   enum Foo { Bar, Baz };
                   static Foo exec(Foo x) { return x; }
           };
       &quot;&quot;&quot;
true

julia&gt; @cxx Klassy::Bar
Cxx.CppEnum{Symbol(&quot;Klassy::Foo&quot;),UInt32}(0x00000000)

julia&gt; @cxx Klassy::exec(@cxx Klassy::Baz)
Cxx.CppEnum{Symbol(&quot;Klassy::Foo&quot;),UInt32}(0x00000001)</code></pre><h2 id="C-classes-1"><a class="docs-heading-anchor" href="#C-classes-1">C++ classes</a><a class="docs-heading-anchor-permalink" href="#C-classes-1" title="Permalink"></a></h2><pre><code class="language-julia-repl">julia&gt; cxx&quot;&quot;&quot;
           #include &lt;iostream&gt;
           class Hello {
               public:
                   void hello_world(const char *now) {
                       std::string snow = now;
                       std::cout &lt;&lt; &quot;Hello, World! Now is &quot; &lt;&lt; snow &lt;&lt; std::endl;
                   }
           };
       &quot;&quot;&quot;
true

julia&gt; hello_class = @cxxnew Hello()
(class Hello *) @0x00007f82dd7d19a0


julia&gt; tstamp = string(Dates.now())
&quot;2017-08-21T13:53:27.85&quot;

julia&gt; @cxx hello_class-&gt;hello_world(pointer(tstamp))
Hello, World! Now is 2017-08-21T13:53:27.85</code></pre><h2 id="Using-C-with-shared-libraries-1"><a class="docs-heading-anchor" href="#Using-C-with-shared-libraries-1">Using C++ with shared libraries</a><a class="docs-heading-anchor-permalink" href="#Using-C-with-shared-libraries-1" title="Permalink"></a></h2><p>ArrayMaker.h</p><pre><code class="language-c">#ifndef ARRAYMAKER_H
#define ARRAYMAKER_H

class ArrayMaker {
    private:
        int inumber;
        float fnumber;
        float* farr;
    public:
        ArrayMaker(int, float);
        float* fillarr();
};

#endif</code></pre><p>ArrayMaker.cpp</p><pre><code class="language-c">#include &quot;ArrayMaker.h&quot;
#include &lt;iostream&gt;

using namespace std;

ArrayMaker::ArrayMaker(int inum, float fnum) {
    cout &lt;&lt; &quot;Got arguments: &quot; &lt;&lt; inum &lt;&lt; &quot; and &quot; &lt;&lt; fnum &lt;&lt; endl;
    inumber = inum;
    fnumber = fnum;
    farr = new float[inumber];
}

float* ArrayMaker::fillarr() {
    cout &lt;&lt; &quot;Filling the array&quot; &lt;&lt; endl;
    for (int i = 0; i &lt; inumber; i++) {
        farr[i] = fnumber;
        fnumber *= 2;
    }
    return farr;
}</code></pre><p>Compile into a shared library</p><pre><code class="language-none">g++ -shared -fPIC ArrayMaker.cpp -o libarraymaker.so</code></pre><p>Using from Julia</p><pre><code class="language-julia-repl">julia&gt; const path_to_lib = pwd();

julia&gt; addHeaderDir(path_to_lib, kind=C_System)

julia&gt; Libdl.dlopen(joinpath(path_to_lib, &quot;libarraymaker.so&quot;), Libdl.RTLD_GLOBAL)
Ptr{Nothing} @0x00007f9dd4556d60

julia&gt; cxxinclude(&quot;ArrayMaker.h&quot;)

julia&gt; maker = @cxxnew ArrayMaker(5, 2.0)
Got arguments: 5 and 2
(class ArrayMaker *) @0x00007f9dd7e25f10


julia&gt; arr = @cxx maker-&gt;fillarr()
Filling the array
Ptr{Float32} @0x00007f9dd7e21370

julia&gt; unsafe_wrap(Array, arr, 5)
5-element Array{Float32,1}:
  2.0
  4.0
  8.0
 16.0
 32.0</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../api/">« API</a><a class="docs-footer-nextpage" href="../implementation/">Implementation »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 27 January 2020 03:39">Monday 27 January 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
